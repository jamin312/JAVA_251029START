<!DOCTYPE html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layout}"
	  xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<script
  src="https://code.jquery.com/jquery-3.7.1.js"
  integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
  crossorigin="anonymous">
</script>
<body layout:fragment="content">
	<table>
		<thead>
			<tr>
				<th>도서번호</th>
				<th>도서명</th>
				<th>대여총계</th>
				<th>대여횟수</th>
			</tr>
		</thead>
		<tbody id="bookInfo">
		</tbody>
	</table>
</body>
<script>
function getList() {
	fetch("/listBookInfo")
	.then(res => res.json())
	.then(result => {
		console.log(result);
		$(result).each((idx, ele) => {	
			console.log(ele);
			const newTag = (`
			<tr>
			 <td>${ele.bookNo}</td>
			 <td>${ele.bookName}</td>
			 <td>${ele.rentPrice}</td>
			 <td>${ele.rentCount}</td>
			</tr>`);
			$("#bookInfo").append($(newTag));			
		})
	})
}

getList();
</script>
</html>